(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{8783:function(e,n,t){"use strict";var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(n){i(n)}}function u(e){try{c(r.throw(e))}catch(n){i(n)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,u)}c((r=r.apply(e,n||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.generatorByEvents=void 0;const i=o(t(7187)),a=Symbol("end"),u=e=>e===a;n.generatorByEvents=function(e){const n=new i.default,t={};let o=!1;const c=[],s=e=>{n.emit("data",e)||c.push(e)};return e({push:e=>s(e),done:()=>s(a),error:e=>{t.error=e,s(a)}}),{next:()=>r(this,void 0,void 0,(function*(){if(o)return{value:void 0,done:!0};if(Object.hasOwnProperty.call(t,"error"))throw o=!0,t.error;if(0===c.length)return new Promise(((e,r)=>{n.once("data",(n=>{if(Object.hasOwnProperty.call(t,"error"))return o=!0,void r(t.error);u(n)?e({value:void 0,done:!0}):e({value:n,done:!1})}))}));const e=c.shift();return u(e)?{value:void 0,done:!0}:{value:e,done:!1}})),return:e=>r(this,void 0,void 0,(function*(){return s(a),{value:e,done:!0}})),throw:e=>r(this,void 0,void 0,(function*(){return s(a),{value:void 0,done:!0}})),[Symbol.asyncIterator](){return this}}}},9780:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/experimenta/table",function(){return t(5444)}])},1226:function(e,n,t){"use strict";t.d(n,{zx:function(){return s},ZP:function(){return f},EE:function(){return l}});var r=t(5893),o=t(4184),i=t.n(o);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){a(e,n,t[n])}))}return e}function c(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=function(e){var n=e.className,t=c(e,["className"]);return(0,r.jsx)("button",u({className:i()(n,"border px-4 py-2 rounded",{"hover:bg-gray-100":!t.disabled,"cursor-default text-gray-300":t.disabled})},t))},f=function(e){var n=e.className,t=c(e,["className"]);return(0,r.jsx)("button",u({className:i()(n,{"text-blue-700":!t.disabled,"cursor-default text-gray-300":t.disabled})},t))},l=function(e){var n=e.className,t=c(e,["className"]);return(0,r.jsx)("button",u({className:i()(n,"text-lg","border px-4 py-2 rounded","hover:bg-gray-100")},t))}},2847:function(e,n,t){"use strict";t.d(n,{R:function(){return a}});var r=t(5503),o=t(6257),i=(0,r.ZF)({apiKey:"AIzaSyA5HiYzsq8BkJGCJNZtLHa4YOQ76YJ_1vg",authDomain:"planning-p2p.firebaseapp.com",databaseURL:"https://planning-p2p-default-rtdb.firebaseio.com",projectId:"planning-p2p",storageBucket:"planning-p2p.appspot.com",messagingSenderId:"126796717544",appId:"1:126796717544:web:319755cc30177097f3985d"}),a=(0,o.ad)(i)},5444:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return A}});var r=t(5893),o=t(387),i=t(7294),a=t(5934),u=t(6810),c=t(1226),s=t(5666),f=t.n(s),l=t(6257),h=t(7187),v=t.n(h);function p(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var d,y=function e(){var n=this,t=this,r=this,o=this,i=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=new(v()),this.on=function(e,t){return n.events.on(e,t)},this.once=function(e,n){return t.events.on(e,n)},this.off=function(e,n){return r.events.off(e,n)},this.emit=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var i;return(i=o.events).emit.apply(i,[e].concat(p(t)))},this.emitWithChange=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var o,a=(o=i.events).emit.apply(o,[e].concat(p(t)));return i.events.emit("changes"),a}},b=t(2847),m=t(8783);function w(e){var n,t;function r(n,t){try{var i=e[n](t),a=i.value,u=a instanceof O;Promise.resolve(u?a.wrapped:a).then((function(e){u?r("next",e):o(i.done?"return":"normal",e)}),(function(e){r("throw",e)}))}catch(c){o("throw",c)}}function o(e,o){switch(e){case"return":n.resolve({value:o,done:!0});break;case"throw":n.reject(o);break;default:n.resolve({value:o,done:!1})}(n=n.next)?r(n.key,n.arg):t=null}this._invoke=function(e,o){return new Promise((function(i,a){var u={key:e,arg:o,resolve:i,reject:a,next:null};t?t=t.next=u:(n=t=u,r(e,o))}))},"function"!==typeof e.return&&(this.return=void 0)}function x(e){var n;if("function"===typeof Symbol){if(Symbol.asyncIterator&&null!=(n=e[Symbol.asyncIterator]))return n.call(e);if(Symbol.iterator&&null!=(n=e[Symbol.iterator]))return n.call(e)}throw new TypeError("Object is not async iterable")}function g(e,n,t,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void t(s)}u.done?n(c):Promise.resolve(c).then(r,o)}function k(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){g(i,r,o,a,u,"next",e)}function u(e){g(i,r,o,a,u,"throw",e)}a(void 0)}))}}function j(e){return new O(e)}function O(e){this.wrapped=e}function _(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return function(){return new w(e.apply(this,arguments))}}function E(e){return S.apply(this,arguments)}function S(){return(S=P(f().mark((function e(n){var t,r,o,i,a,u,c,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j((0,l.QT)(n));case 2:if(e.sent.exists()){e.next=6;break}return e.next=6,j((0,l.pl)(n,{}));case 6:t=function(e){(0,l.cf)(n,(function(n){return e.push(n)}),(function(n){return e.error(n)}),(function(){return e.done()}))},r=!1,o=!1,e.prev=8,a=x((0,m.generatorByEvents)(t));case 10:return e.next=12,j(a.next());case 12:if(!(r=!(u=e.sent).done)){e.next=20;break}return c=u.value,s=c,e.next=17,s;case 17:r=!1,e.next=10;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(8),o=!0,i=e.t0;case 26:if(e.prev=26,e.prev=27,!r||null==a.return){e.next=31;break}return e.next=31,i.return();case 31:if(e.prev=31,!o){e.next=34;break}throw i;case 34:return e.finish(31);case 35:return e.finish(26);case 36:case"end":return e.stop()}}),e,null,[[8,22,26,36],[27,,31,35]])})))).apply(this,arguments)}"function"===typeof Symbol&&Symbol.asyncIterator&&(w.prototype[Symbol.asyncIterator]=function(){return this}),w.prototype.next=function(e){return this._invoke("next",e)},w.prototype.throw=function(e){return this._invoke("throw",e)},w.prototype.return=function(e){return this._invoke("return",e)};var T=d=function(e){}((d=function(){function e(n,t){var r=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.roomId=n,this.peerId=t,this.events=new y,this.peerConnections={},this.on=this.events.on,this.off=this.events.off,this.init().catch((function(e){r.events.emit("error",e)||console.error(e)}))}var n,t,r;return n=e,(t=[{key:"init",value:function(){return k(f().mark((function e(){var n,t,r,o,i,a,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=E((0,l.JU)(b.R,"rooms",this.roomId)),this.events.once("close",(function(){return n.return()})),t=!1,r=!1,e.prev=3,i=x(n);case 5:return e.next=7,i.next();case 7:if(!(t=!(a=e.sent).done)){e.next=12;break}u=a.value,c=u,console.log("entry",c);case 9:t=!1,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),r=!0,o=e.t0;case 18:if(e.prev=18,e.prev=19,!t||null==i.return){e.next=23;break}return e.next=23,o.return();case 23:if(e.prev=23,!r){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,this,[[3,14,18,28],[19,,23,27]])})).bind(this))()}},{key:"close",value:function(){return k(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.events.emit("close");case 1:case"end":return e.stop()}}),e,this)})).bind(this))()}}])&&_(n.prototype,t),r&&_(n,r),e}())||d)||d;var N=t(4155);N.nextTick((function(){var e;globalThis.peerConnectionListUtil=null!==(e=globalThis.peerConnectionListUtil)&&void 0!==e?e:[];!function(e){var n=new T("demo-room",e);globalThis.peerConnectionListUtil.push(n)}("demo-room-1")}));var C=function(e,n){var t=void 0===n?function(){return"".concat((0,a.Z)())}:n,r=(0,o.useRouter)(),u=r.query[e],c="string"===typeof u?u:void 0;return(0,i.useEffect)((function(){if(r.isReady&&!c&&globalThis.location){var n=new URL(globalThis.location.href);n.searchParams.set(e,t()),N.nextTick((function(){globalThis.location.href=n.href}))}}),[r.isReady]),c},I=function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(c.zx,{onClick:function(){var e=new URL(globalThis.location.href);e.searchParams.delete("i"),navigator.clipboard.writeText(e.href),(0,u.x)("Copied to clipboard the room link.")},children:"Copy Room"})})},A=function(){var e=C("i");return C("room-id",(function(){return"".concat(Date.now(),"-").concat((0,a.Z)())}))&&e?(0,r.jsx)("div",{className:"md:px-20 md:py-5",children:(0,r.jsx)(I,{})}):(0,r.jsx)(r.Fragment,{children:"loading..."})}}},function(e){e.O(0,[16,856,774,888,179],(function(){return n=9780,e(e.s=n);var n}));var n=e.O();_N_E=n}]);